!function(){function a(b,c){for(var d,e,f=[],g=b.split("/"),h=0;null!=(e=g[h++]);)".."==e?f.pop():"."!=e&&f.push(e);if(f=f.join("/"),h=a,e=h.m[c||0],d=e[f+".js"]||e[f+"/index.js"]||e[f],g='Cannot require("'+f+'")',!d)throw Error(g);if((e=d.c)&&(d=h.m[c=e][b=d.m]),!d)throw Error(g);return d.exports||d(d,d.exports={},function(a){return h("."!=a.charAt(0)?a:b+"/../"+a,c)}),d.exports}a.m=[],a.m[0]={"abstract_compiler.js":function(a,b,c){!function(){"use strict";var b,d,e,f,g,h={}.hasOwnProperty,i=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};e=c("./compile_error"),f=c("./java_script_builder"),d=c("./coffee_script_builder"),g=c("./utils").isEmpty,b=function(){function a(a,b){var c,d,e;this.compiler=a,this.exports=a.exports,this.exportDefault=a.exportDefault,this.imports=a.imports,this.importDefault=a.importDefault,this.moduleName=a.moduleName,this.lines=a.lines,this.options=b,this.dependencyNames=[],d=this.imports;for(c in d)h.call(d,c)&&i.call(this.dependencyNames,c)<0&&this.dependencyNames.push(c);e=this.importDefault;for(c in e)h.call(e,c)&&i.call(this.dependencyNames,c)<0&&this.dependencyNames.push(c);this.assertValid()}return a.prototype.assertValid=function(){if(this.exportDefault&&!g(this.exports))throw new e("You cannot use both `export default` and `export` in the same module")},a.prototype.buildPreamble=function(a){var b,c,d=this;return b=[],c=this.build(function(c){var e,f,g,h,i,j,k;for(h=0,f=c.unique("dependency"),k=[],i=0,j=a.length;j>i;i++)g=a[i],g in d.importDefault?k.push(b.push(d.importDefault[g])):(e=f.next(),b.push(e),k.push(d.buildImportsForPreamble(c,d.imports[g],e)));return k}),[b,c]},a.prototype.build=function(a){var b;return b=this.options.coffee?new d:new f,a(b),b.toString()},a.prototype.buildImportsForPreamble=function(a,b,c){var d,e,f;f=[];for(e in b)h.call(b,e)&&(d=b[e],f.push(a["var"](d,function(){return a.prop(c,e)})));return f},a}(),a.exports=b}.call(this)},"amd_compiler.js":function(a,b,c){!function(){"use strict";var b,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=c("./abstract_compiler"),f=c("path"),e=c("./utils").isEmpty,b=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.stringify=function(){var a=this;return this.build(function(b){var c,d,g,h,i;i=a.buildPreamble(a.dependencyNames),h=i[0],g=i[1],e(a.exports)||(a.dependencyNames.push("exports"),h.push("__exports__"));for(d in a.dependencyNames)c=a.dependencyNames[d],/^\./.test(c)&&(a.dependencyNames[d]=f.join(a.moduleName,"..",c).replace(/[\\]/g,"/"));return b.line(function(){return b.call("define",function(c){return a.moduleName&&c(b.print(a.moduleName)),c(b["break"]),c(b.print(a.dependencyNames)),c(b["break"]),c(function(){return b["function"](h,function(){var c,d,e;b.useStrict(),g&&b.append(g),b.append.apply(b,a.lines),e=a.exports;for(c in e)d=e[c],b.line("__exports__."+c+" = "+d);return a.exportDefault?b.line("return "+a.exportDefault):void 0})})})})})},b}(d),a.exports=b}.call(this)},"cjs_compiler.js":function(a,b,c){!function(){"use strict";var b,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=c("./abstract_compiler"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.stringify=function(){var a=this;return this.build(function(b){var c,d,f,g,h,i,j,k,l,m,n,o,p;g=function(a,c,d){var e,f;return null==d&&(d=null),e=function(){return b.call("require",[b.print(c)])},f=d?function(){return b.prop(e,d)}:e,b["var"](a,f)},b.useStrict(),f=b.unique("dependency"),m=a.importDefault;for(j in m)e.call(m,j)&&(k=m[j],g(k,j));n=a.imports;for(j in n)if(e.call(n,j))if(l=n[j],1===Object.keys(l).length)k=Object.keys(l)[0],g(l[k],j,k);else{d=f.next(),g(d,j);for(k in l)e.call(l,k)&&(c=l[k],"default"===k?b["var"](c,""+d):b["var"](c,""+d+"."+k))}b.append.apply(b,a.lines),a.exportDefault&&b.line("module.exports = "+a.exportDefault),o=a.exports,p=[];for(h in o)i=o[h],p.push(b.line("exports."+h+" = "+i));return p})},b}(b),a.exports=d}.call(this)},"cli.js":function(a,b,c){!function(){"use strict";var b,d,e,f,g;f=c("optimist"),e=c("fs"),g=c("path"),d=c("./compiler"),b=function(){function a(a,b,c){this.stdin=null!=a?a:process.stdin,this.stdout=null!=b?b:process.stdout,this.fs=null!=c?c:c}return a.start=function(a,b,c,d){return null==b&&(b=process.stdin),null==c&&(c=process.stdout),null==d&&(d=e),new this(b,c,d).start(a)},a.prototype.start=function(a){var b,c,d,e,f;if(c=this.parseArgs(a),c.help)return this.argParser(a).showHelp(),void 0;if(c.stdio)this.processStdio(c);else for(f=c._,d=0,e=f.length;e>d;d++)b=f[d],this.processPath(b,c);return null},a.prototype.parseArgs=function(a){var b,c,d,e,f,g,h,i,j;if(b=this.argParser(a).argv,b.imports){for(d={},i=b.imports.split(","),g=0,h=i.length;h>g;g++)e=i[g],j=e.split(":"),f=j[0],c=j[1],d[f]=c;b.imports=d}return b.global&&(b.into=b.global),b},a.prototype.argParser=function(a){return f(a).usage("compile-modules usage:\n\n  Using files:\n    compile-modules INPUT --to DIR [--anonymous] [--type TYPE] [--imports PATH:GLOBAL]\n\n  Using stdio:\n    compile-modules --stdio [--coffee] [--type TYPE] [--imports PATH:GLOBAL] (--module-name MOD|--anonymous)").options({type:{"default":"amd",describe:'The type of output (one of "amd", "cjs", or "globals")'},to:{describe:"A directory in which to write the resulting files"},imports:{describe:"A list of path:global pairs, comma separated (e.g. jquery:$,ember:Ember)"},anonymous:{"default":!1,type:"boolean",describe:"Do not include a module name"},"module-name":{describe:"The name of the outputted module",alias:"m"},stdio:{"default":!1,type:"boolean",alias:"s",describe:"Use stdin and stdout to process a file"},coffee:{"default":!1,type:"boolean",describe:"Process stdin as CoffeeScript (requires --stdio)"},global:{describe:"When the type is `globals`, the name of the global to export into"},help:{"default":!1,type:"boolean",alias:"h",describe:"Shows this help message"}}).check(function(a){var b;return"amd"===(b=a.type)||"cjs"===b||"globals"===b}).check(function(a){return!(a.anonymous&&a.m)}).check(function(a){return a.stdio&&"amd"===a.type?a.anonymous||a.m||!1:!0}).check(function(a){return!(a.coffee&&!a.stdio)}).check(function(a){return a.stdio||a.to||a.help}).check(function(a){return a.imports?"globals"===a.type:!0})},a.prototype.processStdio=function(a){var b,c=this;return b="",this.stdin.resume(),this.stdin.setEncoding("utf8"),this.stdin.on("data",function(a){return b+=a}),this.stdin.on("end",function(){var d;return d=c._compile(b,a.m,a.type,a),c.stdout.write(d)})},a.prototype.processPath=function(a,b){var c=this;return this.fs.stat(a,function(d,e){return d?(console.error(d.message),process.exit(1)):e.isDirectory()?c.processDirectory(a,b):c.processFile(a,b)})},a.prototype.processDirectory=function(a,b){var c=this;return this.fs.readdir(a,function(d,e){var f,h,i,j;for(d&&(console.error(d.message),process.exit(1)),j=[],h=0,i=e.length;i>h;h++)f=e[h],j.push(c.processPath(g.join(a,f),b));return j})},a.prototype.processFile=function(a,b){var c=this;return this.fs.readFile(a,"utf8",function(d,e){var f,h,i,j;return f=g.extname(a),h=g.join(g.dirname(a),g.basename(a,f)).replace(/[\\]/g,"/"),i=c._compile(e,h,b.type,{coffee:".coffee"===f,imports:b.imports}),j=g.join(b.to,a).replace(/[\\]/g,"/"),c._mkdirp(g.dirname(j)),c.fs.writeFile(j,i,"utf8",function(a){return a?(console.error(a.message),process.exit(1)):void 0})})},a.prototype._compile=function(a,b,c,e){var f,g;return c={amd:"AMD",cjs:"CJS",globals:"Globals"}[c],f=new d(a,b,e),g="to"+c,f[g]()},a.prototype._mkdirp=function(a){var b;if(!this.fs.existsSync(a))return b=g.dirname(a),"."!==b&&"/"!==b&&this._mkdirp(b),this.fs.mkdirSync(a)},a}(),a.exports=b}.call(this)},"coffee_script_builder.js":function(a,b,c){!function(){"use strict";var b,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=c("./script_builder"),b=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.eol="",b.prototype["var"]=function(a,b){return this.set(a,b)},b.prototype._prepareArgsForCall=function(a){var c,d,e;for(a=b.__super__._prepareArgsForCall.call(this,a).slice(),d=0,e=a.length;e>d;d++)if(c=a[d],c===this["break"]){a[a.length-1]!==this["break"]&&a.push(this["break"]);break}return a},b.prototype._functionHeader=function(a){return a.length?"("+a.join(", ")+") ->":"->"},b}(d),a.exports=b}.call(this)},"compile_error.js":function(a){!function(){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return d(b,a),b}(Error),a.exports=b}.call(this)},"compiler.js":function(a,b,c){!function(){"use strict";var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;b=c("./amd_compiler"),d=c("./cjs_compiler"),m=c("./globals_compiler"),q=c("./utils").Unique,i=/^\s*export\s+(.*?)\s*(;)?\s*$/,j=/^\s*export\s*default\s*(.*?)\s*(;)?\s*$/,k=/^\s*export\s+function\s+(\w+)\s*(\(.*)$/,l=/^\s*export\s+var\s+(\w+)\s*=\s*(.*)$/,n=/^\s*import\s+(.*)\s+from\s+(?:"([^"]+?)"|'([^']+?)')\s*(;)?\s*$/,o=/^\s*(.*)\s+as\s+(.*)\s*$/,p=/^export\s+({.*})\s+from\s+(?:"([^"]+?)"|'([^']+?)')\s*(;)?\s*$/,g=new RegExp("/\\*"),f=new RegExp("\\*/"),e=/^###/,r=function(a){var b,c,d,e,f;if("{"===a[0]&&"}"===a[a.length-1]){for(e=a.slice(1,-1).split(","),f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.trim());return f}return[a.trim()]},h=function(){function a(a,b,c){null==b&&(b=null),null==c&&(c={}),this.string=a,this.moduleName=b,this.options=c,this.imports={},this.importDefault={},this.exports={},this.exportDefault=null,this.lines=[],this.id=0,this.inBlockComment=!1,this.reExportUnique=new q("reexport"),this.options.coffee?(this.commentStart=e,this.commentEnd=e):(this.commentStart=g,this.commentEnd=f),this.parse()}return a.prototype.parse=function(){var a,b,c,d;for(d=this.string.split("\n"),b=0,c=d.length;c>b;b++)a=d[b],this.parseLine(a);return null},a.prototype.parseLine=function(a){var b;return this.inBlockComment?(b=this.matchLine(a,this.commentEnd))?this.processExitComment(a):this.processLine(a):(b=this.matchLine(a,j))?this.processExportDefault(b):(b=this.matchLine(a,k))?this.processExportFunction(b):(b=this.matchLine(a,l))?this.processExportVar(b):(b=this.matchLine(a,p))?this.processReexport(b):(b=this.matchLine(a,i))?this.processExport(b):(b=this.matchLine(a,n))?this.processImport(b):(b=this.matchLine(a,this.commentStart))?this.processEnterComment(a):this.processLine(a)},a.prototype.matchLine=function(a,b){var c;return c=a.match(b),!c||this.options.coffee||c[c.length-1]?c:null},a.prototype.processExportDefault=function(a){return this.exportDefault=a[1]},a.prototype.processExport=function(a){var b,c,d,e,f;for(e=r(a[1]),f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(this.exports[b]=b);return f},a.prototype.processExportFunction=function(a){var b,c;return c=a[1],b=a[2],this.lines.push("function "+c+b),this.exports[c]=c},a.prototype.processExportVar=function(a){var b,c;return b=a[1],c=a[2],this.lines.push("var "+b+" = "+c),this.exports[b]=b},a.prototype.processImport=function(a){var b,c,d,e,f,g,h;if(f=a[1],"{"===f[0]&&"}"===f[f.length-1]){for(f=f.slice(1,-1),c=function(){var a,b,c,d;for(c=f.split(/\s*,\s*/),d=[],a=0,b=c.length;b>a;a++)e=c[a],d.push(e.trim());return d}(),d={},g=0,h=c.length;h>g;g++)e=c[g],(b=e.match(o))?d[b[1]]=b[2]:d[e]=e;return this.imports[a[2]||a[3]]=d}return this.importDefault[a[2]||a[3]]=a[1]},a.prototype.processReexport=function(a){var b,c,d,e,f,g,h;for(e=r(a[1]),c=a[2]||a[3],b=this.reExportUnique.next(),this.importDefault[c]=b,h=[],f=0,g=e.length;g>f;f++)d=e[f],h.push(this.exports[d]=""+b+"."+d);return h},a.prototype.processLine=function(a){return this.lines.push(a)},a.prototype.processEnterComment=function(a){return this.matchLine(a,f)||(this.inBlockComment=!0),this.lines.push(a)},a.prototype.processExitComment=function(a){return this.inBlockComment=!1,this.lines.push(a)},a.prototype.toAMD=function(){return new b(this,this.options).stringify()},a.prototype.toCJS=function(){return new d(this,this.options).stringify()},a.prototype.toGlobals=function(){return new m(this,this.options).stringify()},a}(),a.exports=h}.call(this)},"globals_compiler.js":function(a,b,c){!function(){"use strict";var b,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=c("./abstract_compiler"),e=c("./utils").isEmpty,d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.stringify=function(){var a=this;return this.build(function(b){var c,d,g,h,i,j,k,l,m,n,o,p,q;for(k=[],l=[],i={},h=a.options.into||a.exportDefault,(!e(a.exports)||a.exportDefault)&&(k.push(a.exportDefault?b.global:h?""+b.global+"."+h+" = {}":b.global),l.push("exports")),p=a.dependencyNames,n=0,o=p.length;o>n;n++)if(j=p[n],g=a.options.imports[j],k.push(""+b.global+"."+g),j in a.importDefault)l.push(a.importDefault[j]);else{l.push(g),q=a.imports[j];for(j in q)f.call(q,j)&&(c=q[j],i[c]=""+g+"."+j)}return m=function(){return b["function"](l,function(){var c,d,e,g,j,k;b.useStrict();for(e in i)f.call(i,e)&&(g=i[e],b["var"](e,g));if(b.append.apply(b,a.lines),a.exportDefault)return b.set("exports."+h,a.exportDefault);j=a.exports,k=[];for(c in j)d=j[c],k.push(b.set("exports."+c,d));return k})},d=function(a){var b,c,d,e;for(e=[],c=0,d=k.length;d>c;c++)b=k[c],e.push(a(b));return e},b.line(function(){return b.call(m,d)})})},b}(b),a.exports=d}.call(this)},"index.js":function(a,b,c){!function(){"use strict";var a;a=c("./compiler"),b.Compiler=a}.call(this)},"java_script_builder.js":function(a,b,c){!function(){"use strict";var b,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=c("./script_builder"),b=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.eol=";",b.prototype["var"]=function(a,b){return this.line("var "+this.capture(a)+" = "+this.capture(b))},b.prototype._functionHeader=function(a){return"function("+a.join(", ")+") {"},b.prototype._functionTail=function(){return"}"},b}(d),a.exports=b}.call(this)},"require_support.js":function(a,b,c){!function(){"use strict";var a,d,e,f,g,h,i,j,k,l,m,n,o;o=c("vm"),l=c("fs"),n=c("path"),a=c("./compiler"),d=c("coffee-script").compile,i=!1,f=c.extensions[".js"],e=c.extensions[".coffee"],h=function(){return i?void 0:(i=!0,c.extensions[".js"]=k,c.extensions[".coffee"]=j)},g=function(){return i?(i=!1,c.extensions[".js"]=f,c.extensions[".coffee"]=e):void 0},k=function(a,b){return a._compile(m(b))},j=function(a,b){return a._compile(d(m(b)))},m=function(b){var c,d;return c=l.readFileSync(b,"utf8"),d=n.extname(b),new a(c,n.basename(b,d),{coffee:".coffee"===d}).toCJS()},b.enable=h,b.disable=g}.call(this)},"script_builder.js":function(a,b,c){!function(){"use strict";var b,d,e,f,g,h=[].slice;g=c("./utils").Unique,d={indent:!0},e={outdent:!0},b={"break":!0},f=function(){function a(){this.buffer=[]}return a.prototype["break"]=b,a.prototype.global="window",a.prototype.useStrict=function(){return this.line('"use strict"')},a.prototype.set=function(a,b){return this.line(""+this.capture(a)+" = "+this.capture(b))},a.prototype.call=function(a,c){var d,e,f,g,h,i,j;for(a=this._wrapCallable(a),c=this._prepareArgsForCall(c),e=c.length-1;c[e]===b;)e--;for(h=""+a+"(",g=!1,f=i=0,j=c.length;j>i;f=++i)d=c[f],d===b?(this.append(h),g||(g=!0,this.indent()),h=""):(h+=d,e>f&&(h+=",",c[f+1]!==b&&(h+=" ")));return h+=")",this.append(h),g?this.outdent():void 0},a.prototype._prepareArgsForCall=function(a){var b,c=this;return"function"==typeof a&&(b=[],a(function(a){return b.push(c.capture(a))}),a=b),a},a.prototype._wrapCallable=function(a){var b,c,d,e=this;return"function"!=typeof a?a:(c=this["function"],b=!1,this["function"]=function(){var a;return a=1<=arguments.length?h.call(arguments,0):[],b=!0,c.call.apply(c,[e].concat(h.call(a)))},d=this.capture(a),this["function"]=c,b&&(d="("+d+(null!=this._functionTail?"":"\n")+")"),d)},a.prototype["function"]=function(a,b){return this.append(this._functionHeader(a)),this.indent(),b(),this.outdent(),null!=this._functionTail?this.append(this._functionTail()):void 0},a.prototype.print=function(a){return JSON.stringify(this.capture(a))},a.prototype.prop=function(a,b){return this.append(""+this.capture(a)+"."+this.capture(b))},a.prototype.unique=function(a){return new g(a)},a.prototype.line=function(a){return this.append(this.capture(a)+this.eol)},a.prototype.append=function(){var a,b;return a=1<=arguments.length?h.call(arguments,0):[],(b=this.buffer).push.apply(b,a)},a.prototype.indent=function(){return this.buffer.push(d)},a.prototype.outdent=function(){return this.buffer.push(e)},a.prototype.capture=function(a){var b,c;return"function"!=typeof a?a:(b=this.buffer,this.buffer=[],a(),c=this.toString(),this.buffer=b,c)},a.prototype.toString=function(){var a,b,c,f,g,h,i,j,k,l;for(b=0,f=[],k=this.buffer,g=0,i=k.length;i>g;g++)if(a=k[g],a===d)b++;else if(a===e)b--;else for(l=a.split("\n"),h=0,j=l.length;j>h;h++)c=l[h],/^\s*$/.test(c)?f.push(c):f.push(new Array(b+1).join("  ")+c);return f.join("\n")},a}(),a.exports=f}.call(this)},"utils.js":function(a,b){!function(){"use strict";var a,c;c=function(a){var b;for(b in a)return!1;return!0},a=function(){function a(a){this.prefix=a,this.index=1}return a.prototype.next=function(){return"__"+this.prefix+this.index++ +"__"},a}(),b.isEmpty=c,b.Unique=a}.call(this)}},ModuleTranspiler=a("index.js")}();